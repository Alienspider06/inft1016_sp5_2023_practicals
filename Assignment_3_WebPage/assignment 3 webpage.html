<!DOCTYPE html>
<html>
<head>
    <!-- This code will define the properties of the document-->
    <meta charset="utf-8">
    <!-- The charset meta tag sets the character encoding for the following document into UTF 8. which will support a vast range of characters, numerics, and symbols-->
    <title>Assingment 3 webpage</title> 
    <link rel="stylesheet" href="base.css">
    <!-- The link tag links this document to an external stylesheet named 'base,css' which contains the foundational styling for a webpage-->
    <style>
        /*CSS style definition begins here*/
        /*styling variables*/
        :root {
            --primary-color: rgb(27, 25, 25);
            --secondary-color: rgb(200,200,200);
            --bg-color: rgb(240, 240, 240);
            --font-color: rgb(50, 50, 50);
            --heading-color: rgb(100, 100, 100);

        }

        [data-theme="dark"] {

            --primary-color: rgb(255,255,255);
            --bg-color: rgb(20,20,20);/* 0,0,255 */
           
        }

        body {
            
            display: flex;/*it is used to establish a flex container*/
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: var(--primary-color);
            background-color: var(--bg-color);
        }

        button, img, p {
            margin-bottom: 10px
        }

        img {
            max-width: 400px;
            height: auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Image gallery</h1>
        <button onclick="toggleTheme()">Toggle Theme</button>
    </header>
    <nav>
        <ul>  <!--Using the li command to create buttons that will link with alot of stuffs-->
            <li><a href="#">Home</a></li> 
            <li><a href="#">Our team</a></li>
            <li><a href="#">Project</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
        <form><!--creating a function where the user inputs his name and the website interacts with that indiviual-->
            <input type="text" name="user_name" placeholder="Enter your name!">
            <button type="submit>"Apply!</button>
        </form>
    </nav>
    <main>
        

        <img src="https://tisztaotthon.cafeblog.hu/files/2018/01/nanotech.jpg">
        <p id="imageDescription">default image description</p>
        <!--creating buttons which will change the image once clicked by the user-->
        <button onclick="imageChanger('https://uwaterloo.ca/future-students/sites/ca.future-students/files/uploads/images/eng-nano-student.jpg', 'Nanotechnology means electronic devides and technologies that are the size of an atom. These devices function at the molecular level. A university created a course solely based on nanotechnology by realizing its untapped potential. The image is taken by the officials of university of waterloo. To view a licensed version of this image visit the following link:', 'https://uwaterloo.ca/future-students/programs/nanotechnology-engineering')">Nanotechnology</button>
        <button onclick="imageChanger('https://cdn.leverageedu.com/blog/wp-content/uploads/2020/04/17210350/Applications-of-Nanotechnology.png', 'Nanotechnology can be used in many different ways. A lot of problems can be easily solved with the help of nanotechnology .Applications of nanotechnology in engineering. The image was provided by team leverage edu. To view the licensed ', 'https://leverageedu.com/blog/applications-of-nanotechnology/')">Application</button>
        <button onclick="imageChanger('https://image.slideserve.com/631675/nanotechnology-in-mechanical-engineering19-l.jpg', 'Nanotechnology can solve different kinds of problem for mechanical engineering.', 'https://www.slideserve.com/brit/nanotechnology-in-mechanical-engineering')">Engineering</button>
        <button onclick="imageChanger('https://www.azonano.com/images/Article_Images/ImageForArticle_4985(1).jpg', 'How nanotechnology can solve different types of challenges in computer science and computer software engineering.', 'https://www.azonano.com/article.aspx?ArticleID=4985')">Computer science</button>
        <button onclick="imageChanger('https://greenstories.co.in/wp-content/uploads/2020/12/1-4.jpg', 'Nanotechnology possesses alot of threats and dangers and this link will tell us exactly about the problem.', 'https://greenstories.co.in/nanotoxicology/')">Threats</button>
        <p id="date-time">Now the date and time is:</p>
    
    
    </main>
    <footer>
        <p>Â©Copyright 2050 by nobody. All rights reversed.</p>
    </footer>

    <script>
        function toggleTheme() {
            // function to toggle the theme
            const body = document.body; //getting the body element
            if (body.getAttribute('data-theme') == 'dark') { //check if the theme is dark currently
                body.removeAttribute('data-theme'); //if it is dark then remove the data theme attribute
            } else {
                body.setAttribute('data-theme', 'dark');//if not then set the data theme attribute to dark
            }

        }

        //function to change the displayed image and it's description
        function imageChanger(imageSrc, imageDescription, externalLink) {
            document.querySelector('img').src = imageSrc; //setting the image source to the provided imagesrc
            document.getElementById('imageDescription').innerHTML = imageDescription + ' - <a href="' + externalLink + '" target="_blank">you will find the details within this link</a>';
        }

        //function to get a specific value from the URL query string
        function getQueryStringValue(key) { 
            const urlParams = new URLSearchParams(window.location.search);//creating a new URLsearchparams object using the current URL
            return urlParams.get(key);//returning the value corresponding to the provided key from the query string
        }

        //funtion to update the user heading
        function updateUserHeading() {
            const username = getQueryStringValue('user_name');//getting the username value from the query string using the getquerystring function
            if (username) { //checking if the username value exists
                localStorage.setItem('userName', username); //if it exists, storing the username value in local storage
                const heading = document.querySelector('h1');  //getting the h1 element
                heading.textContent = `Hello, ${username}`; //setting the h1 element's text content to greet the user
            } else {
                const storedUsername = localStorage.getItem('userName'); //retrieving the stored username from local storage
                if (storedUsername) {  //checking if the username value exists
                    const heading = document.querySelector('h1'); //getting the h1 element
                    heading.textContent = `Hello, ${username}`; //setting the h1 element's text content to greet the user based on the stored username
                }
            }
        }

        // additional functions and listeners to handle theme preferences and user input are present in the provided code
        //listeners: this method is used in javascript to listen for specific events on the window object. for example: when an event, such as the load event occurs on the window, it triggers the associated funtion to execute
        function loadThemePrefernce() {
            const savedTheme = localStorage.getItem('themePreferences');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
            }
        }

       

        function saveThemePreference() {
            local.storage.setItem('themPreference', savedTheme);
        }

        function storeUserNameFromQueryString() {
            const username = getQueryStringValue('user_name');
            if (user_name) {
                localStorage.setItem('userName', username);
                
            } else {
                const storeUsername = localStorage.getItem('userName');
                if (storedUsername) {

                }
            }
        }

      
        function showDateTime() {
            const now = new Date();
            const dateTimeElement = document.getElementById('date-time');
            
            const dateTimeString = now.toLocaleString();
            dateTimeElement.textContent = "Now the time and date is: " + dateTimeString;
        }

        //calling all the functions
        window.addEventListener('load', showDateTime);

        window.addEventListener('load', updateUserHeading);

        window.addEventListener('load', loadThemePreference);

        window.addEventListener('load', storeUserNameFromQueryString);               
        
        window.onload=updateUserHeading;
    </script>
</body>
</html>

